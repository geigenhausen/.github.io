<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Explore worldwide travel photography featuring beautiful locations from Japan, France, and more" />
    <meta name="theme-color" content="#a8d8ff" />
    <title>Leo Photos | Travel & Worldwide Photography</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;700;800&display=swap" rel="stylesheet" />

    <!-- Styles -->
    <link rel="stylesheet" href="style.css" />
    <link rel="preload" as="image" href="wallpapers/tokyo_street_night_by_arsenixc_dbbpqj5.jpeg">
    
    <!-- Lightbox CSS -->
    <link href="https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css" rel="stylesheet" />

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg" />
    <link rel="apple-touch-icon" href="apple-touch-icon.png" />
</head>
<body>
    <div id="background-image" style="background-color: #1a1a1a;"></div>
    
    <button id="theme-toggle" class="theme-toggle" aria-label="Toggle dark mode">
        <span class="icon-light">‚òÄÔ∏è</span>
        <span class="icon-dark">üåô</span>
    </button>

    <div class="page-wrapper">
        <header class="site-header">
            <div class="header-content">
                <div class="header-text">
                    <h1 class="site-title">
                        <span class="title-main">Leo Photos</span>
                        <span class="title-sub">Fujifilm x100VI üì∑</span>
                    </h1>
                    <p class="site-description">üá´üá∑ living in üáØüáµ showcasing worldwide pictures.</p>
                </div>
            </div>
        </header>

        <main class="site-main">
            <div class="countries-grid">
                <!-- Japan Section -->
                <section class="country-card" data-country="japan">
                    <details open>
                        <summary class="country-header">
                            <span class="country-flag">üáØüáµ</span>
                            <span class="country-name">Japan„ÉªÊó•Êú¨</span>
                        </summary>
                        <div class="gallery-preview">
                            <div class="gallery">
                                <article class="gallery-item" data-region="Tokyo">
                                    <a href="images/tokyo/tokyo-main.jpg" class="glightbox" data-gallery="japan">
                                    <img src="images/tokyo/tokyo-main.jpg" alt="Tokyo Cityscape at Night" loading="lazy" />
                                    </a>
                                    <div class="gallery-item-info">
                                        <h3>Tokyo„ÉªÊù±‰∫¨</h3>
                                        <p>Capital of Japan</p>
                                    </div>
                                </article>
                                <article class="gallery-item" data-region="Ehime">
                                     <a href="images/DSCF1615.jpeg" class="glightbox" data-gallery="japan">
                                    <img src="images/DSCF1615.jpeg" alt="Matsuyama Castle" loading="lazy"/>
                                    </a>    
                                    <div class="gallery-item-info">
                                        <h3>Ehime„ÉªÊÑõÂ™õ</h3>
                                        <p>Historical castle and cherry blossom</p>
                                    </div>
                                </article>
                                <article class="gallery-item" data-region="Other">
                                    <a href="images/japan/sakura.jpg" class="glightbox" data-gallery="japan">
                                    <img src="images/japan/sakura.jpg" alt="Cherry Blossoms in Full Bloom" loading="lazy" />
                                    </a>
                                    <div class="gallery-item-info">
                                        <h3>Cherry Blossom„ÉªÊ°ú</h3>
                                        <p>Spring beauty across Japan</p>
                                    </div>
                                </article>
                            </div>
                        </div>
                    </details>
                </section>

                <!-- France Section -->
                <section class="country-card" data-country="france">
                    <details>
                        <summary class="country-header">
                            <span class="country-flag">üá´üá∑</span>
                            <span class="country-name">France„Éª„Éï„É©„É≥„Çπ</span>
                        </summary>
                        <div class="gallery-preview">
                            <div class="gallery">
                                <article class="gallery-item" data-region="Paris">
                                    <img src="images/france/paris.jpg" alt="Eiffel Tower at Sunset" loading="lazy" />
                                    <div class="gallery-item-info">
                                        <h3>Paris</h3>
                                        <p>City of Light and Romance</p>
                                    </div>
                                </article>
                                <article class="gallery-item" data-region="Sud-ouest">
                                    <img src="images/france/cahors.jpg" alt="History and Cuisine" loading="lazy" />
                                    <div class="gallery-item-info">
                                        <h3>Cahors</h3>
                                        <p>Gourmet and history</p>
                                    </div>
                                </article>
                            </div>
                        </div>
                    </details>
                </section>
            </div>

            <!-- Sub-galleries -->
            <div class="sub-gallery" data-region="Tokyo">
                <div class="sub-gallery-header">
                    <h2>Tokyo Êù±‰∫¨</h2>
                    <button class="sub-gallery-close">√ó</button>
                </div>
                <div class="sub-gallery-grid">
                    <article class="sub-gallery-item">
                        <img src="images/tokyo/tokyo-main.jpg" alt="Tokyo Scene 1" loading="lazy" />
                        <div class="gallery-item-info">
                            <h3>Shibuya</h3>
                            <p>The famous crossing at night</p>
                        </div>
                    </article>
                    <!-- Add more Tokyo images here -->
                </div>
            </div>

            <div class="sub-gallery" data-region="Ehime">
                <div class="sub-gallery-header">
                    <h2>Ehime ÊÑõÂ™õ</h2>
                    <button class="sub-gallery-close">√ó</button>
                </div>
                <div class="sub-gallery-grid">
                    <article class="sub-gallery-item">
                        <a href="images/DSCF1615.jpeg" class="glightbox" data-gallery="japan">
                        <img src="images/DSCF1615.jpeg" alt="Matsuyama Castle" loading="lazy" />
                         </a>
                        <div class="gallery-item-info">
                            <h3>Matsuyama Castle</h3>
                            <p>Historic castle view (April 2025)</p>
                        </div>
                    </article>
                    <!-- Add more Ehime images here -->
                </div>
            </div>
        </main>

        <!-- Visitor Counter -->
        <div class="visitor-counter">
            <span>Total Visits: </span>
            <span id="visitor-count">Loading...</span>
        </div>

        <!-- Footer -->
        <footer class="site-footer">
            <div class="footer-content">
                <nav class="footer-nav">
                    <a href="/about">About me</a>
                    <span class="nav-separator">|</span>
                    <a href="/gallery">Gallery</a>
                    <span class="nav-separator">|</span>
                    <a href="/shop">Shop</a>
                </nav>
            </div>
        </footer>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/glightbox/dist/js/glightbox.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize Lightbox
            const lightbox = GLightbox({
                touchNavigation: true,
                loop: true,
                closeButton: true,
                zoomable: true
            });

            // Gallery and Sub-gallery functionality
            const galleryItems = document.querySelectorAll('.gallery-item');
            
            galleryItems.forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    const region = this.getAttribute('data-region');
                    const subGallery = document.querySelector(`.sub-gallery[data-region="${region}"]`);
                    
                    if (subGallery) {
                        subGallery.classList.add('active');
                        document.body.style.overflow = 'hidden';
                    }
                });
            });

            // Close sub-gallery functionality
            function closeSubGallery() {
                const activeSubGallery = document.querySelector('.sub-gallery.active');
                if (activeSubGallery) {
                    activeSubGallery.classList.remove('active');
                    document.body.style.overflow = '';
                }
            }

            // Close button handlers
            document.querySelectorAll('.sub-gallery-close').forEach(button => {
                button.addEventListener('click', closeSubGallery);
            });

            // Click outside to close
            document.querySelectorAll('.sub-gallery').forEach(gallery => {
                gallery.addEventListener('click', function(e) {
                    if (e.target === this) {
                        closeSubGallery();
                    }
                });
            });

            // ESC key handler
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeSubGallery();
                }
            });

            // Visitor counter functionality
            const visitorCount = document.getElementById('visitor-count');
            
            function getVisitorCount() {
                let count = localStorage.getItem('visitorCount');
                return parseInt(count || '0');
            }

            function updateVisitorCount() {
                let count = getVisitorCount();
                count++;
                localStorage.setItem('visitorCount', count);
                visitorCount.textContent = count.toLocaleString();
            }

            updateVisitorCount();

            // Theme toggle functionality
            const themeToggle = document.getElementById('theme-toggle');
            
            function setTheme(isDark) {
                document.body.classList.toggle('dark-mode', isDark);
                localStorage.setItem('theme', isDark ? 'dark' : 'light');
            }

            // Check saved theme
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                setTheme(true);
            } else if (savedTheme === null && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                setTheme(true);
            }

            themeToggle.addEventListener('click', () => {
                const isDark = !document.body.classList.contains('dark-mode');
                setTheme(isDark);
            });

            // Background image loading with fallback
            const backgroundImage = new Image();
            const backgroundElement = document.getElementById('background-image');
            
            backgroundImage.onload = function() {
                backgroundElement.style.backgroundImage = `url('${this.src}')`;
                backgroundElement.style.opacity = '1';
            };

            backgroundImage.onerror = function() {
                console.error('Failed to load background image');
                backgroundElement.style.backgroundColor = '#1a1a1a';
            };

            // Load background image
            backgroundImage.src = 'wallpapers/tokyo_street_night_by_arsenixc_dbbpqj5.jpeg';

            // Lazy loading for gallery images
            if ('loading' in HTMLImageElement.prototype) {
                const images = document.querySelectorAll('img[loading="lazy"]');
                images.forEach(img => {
                    img.src = img.src;
                });
            } else {
                // Fallback for browsers that don't support lazy loading
                const script = document.createElement('script');
                script.src = 'https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.3.2/lazysizes.min.js';
                document.body.appendChild(script);
            }

            // Prevent details from closing when clicking gallery items
            document.querySelectorAll('.gallery').forEach(gallery => {
                gallery.addEventListener('click', function(e) {
                    e.stopPropagation();
                });
            });
        });
    </script>
</body>
</html>
